<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="database,sql," />








  <link rel="shortcut icon" type="image/x-icon" href="http://7xt1hs.com1.z0.glb.clouddn.com/avatar.jpg?v=5.0.1" />






<meta name="description" content="SQL语言的动词">
<meta property="og:type" content="article">
<meta property="og:title" content="DataBase(3)之SQL语句">
<meta property="og:url" content="https://Hxiaomin.github.io/2016/09/24/DataBase3/index.html">
<meta property="og:site_name" content="且听风吟">
<meta property="og:description" content="SQL语言的动词">
<meta property="og:updated_time" content="2016-09-26T12:28:25.521Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DataBase(3)之SQL语句">
<meta name="twitter:description" content="SQL语言的动词">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> DataBase(3)之SQL语句 | 且听风吟 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?d5cc679d47d71300820a5285c4941719";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">且听风吟</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">如果人生是一朵花，那么总会有花开花谢的时候，如果人生是一场梦，那么总会有梦醒时分</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'cka6ssTTUoDSTeUfiStx','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                DataBase(3)之SQL语句
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-24T11:51:40+08:00" content="2016-09-24">
              2016-09-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/24/DataBase3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/24/DataBase3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/09/24/DataBase3/" class="leancloud_visitors" data-flag-title="DataBase(3)之SQL语句">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="SQL语言的动词"><a href="#SQL语言的动词" class="headerlink" title="SQL语言的动词"></a>SQL语言的动词</h2><a id="more"></a>
<table>
<thead>
<tr>
<th>SQL功能</th>
<th>动词</th>
</tr>
</thead>
<tbody>
<tr>
<td>数据定义</td>
<td>CREATE，DROP，ALTER</td>
</tr>
<tr>
<td>数据查询</td>
<td>SELECT </td>
</tr>
<tr>
<td>数据操纵（数据更新）</td>
<td>INSERT，UPDATE,DELETE</td>
</tr>
<tr>
<td>数据控制</td>
<td>GRANT，REVOKE</td>
</tr>
</tbody>
</table>
<h2 id="SQL的数据定义语句"><a href="#SQL的数据定义语句" class="headerlink" title="SQL的数据定义语句"></a>SQL的数据定义语句</h2><table>
<thead>
<tr>
<th>操作对象</th>
<th>创建</th>
<th>删除</th>
<th>修改</th>
</tr>
</thead>
<tbody>
<tr>
<td>表</td>
<td>CREATE TABLE</td>
<td>DROP TABLE</td>
<td>ALTER TABLE</td>
</tr>
<tr>
<td>视  图</td>
<td>CREATE VIEW</td>
<td>DROP VIEW</td>
<td></td>
</tr>
<tr>
<td>索  引</td>
<td>CREATE INDEX</td>
<td>DROP INDEX</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="CREATE-TABLE"><a href="#CREATE-TABLE" class="headerlink" title="CREATE TABLE"></a>CREATE TABLE</h2><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &lt;表名&gt;</span><br><span class="line">（&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt; ]</span><br><span class="line">[，&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt;] ]</span><br><span class="line">       …</span><br><span class="line">[，&lt;表级完整性约束条件&gt; ] ）；</span><br></pre></td></tr></table></figure>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>建立一个“学生”表Student，它由学号Sno、姓名Sname、性别Ssex、年龄Sage、所在系Sdept五个属性组成。其中学号不能为空，值是唯一的，并且姓名取值也唯一。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Student</span><br><span class="line">        (Sno       CHAR(5)  Primary Key， </span><br><span class="line">         Sname   CHAR(20)  UNIQUE，          </span><br><span class="line">         Ssex      CHAR(1) ，</span><br><span class="line">         Sage      INT，</span><br><span class="line">         Sdept     CHAR(15))；</span><br></pre></td></tr></table></figure>
<p>建立一个“学生选课”表SC，它由学号Sno、课程号Cno，修课成绩Grade组成，其中(Sno, Cno)为主码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE SC (</span><br><span class="line">        Sno      　CHAR(5) REFERENCES Student(Sno) ,</span><br><span class="line">        Cno     　 CHAR(3) REFERENCES Course(Cno) , </span><br><span class="line">        Grade   　int,</span><br><span class="line">        PRIMARY  KEY (Sno, Cno)  );</span><br></pre></td></tr></table></figure>
<h3 id="完整性约束"><a href="#完整性约束" class="headerlink" title="完整性约束"></a>完整性约束</h3><ul>
<li>主码约束：   PRIMARY  KEY</li>
<li>唯一性约束： UNIQUE</li>
<li>非空值约束： NOT NULL</li>
<li>参照完整性约束</li>
</ul>
<h2 id="DROP-TABLE"><a href="#DROP-TABLE" class="headerlink" title="DROP TABLE"></a>DROP TABLE</h2><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p>DROP TABLE &lt;表名&gt;;<br>基本表删除，数据、表上的索引都删除，表上的视图往往仍然保留，但不可恢复，无法引用</p>
<h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a>Example</h3><p>删除Student表<br>DROP TABLE　Student ;</p>
<h2 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a>ALTER TABLE</h2><h3 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h3><p>ALTER TABLE &lt;表名&gt;<br>[ ADD &lt;新列名&gt; &lt;数据类型&gt; [ 完整性约束 ] ]<br>[ DROP &lt;完整性约束名&gt; ]<br>[ MODIFY &lt;列名&gt; &lt;数据类型&gt; ]；</p>
<h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example"></a>Example</h3><p>添加属性行<br>向Student表增加“入学时间”列，其数据类型为日期型。<br>ALTER TABLE Student ADD Scome DATE;</p>
<p>删除属性列<br>ALTER TABLE Student  Drop Scome;</p>
<p>将年龄的数据类型改为半字长整数。<br>ALTER TABLE Student MODIFY Sage SMALLINT;</p>
<p>删除学生姓名必须取唯一值的约束。<br>ALTER TABLE Student DROP UNIQUE(Sname);</p>
<h2 id="CREATE-INDEX"><a href="#CREATE-INDEX" class="headerlink" title="CREATE INDEX"></a>CREATE INDEX</h2><h3 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h3><p>CREATE [UNIQUE] [CLUSTER] INDEX &lt;索引名&gt;     ON &lt;表名&gt;(&lt;列名&gt;[&lt;次序&gt;][,&lt;列名&gt;[&lt;次序&gt;] ]…)；</p>
<h3 id="Example-3"><a href="#Example-3" class="headerlink" title="Example"></a>Example</h3><p>为学生-课程数据库中的Student，Course，SC三个表建立索引。其中Student表按学号升序建唯一索引，Course表按课程号升序建唯一索引，SC表按学号升序和课程号降序建唯一索引。<br>CREATE UNIQUE INDEX  Stusno ON   Student(Sno);<br>CREATE UNIQUE INDEX  Coucno ON   Course(Cno);<br>CREATE UNIQUE INDEX  Scno     ON   SC(Sno ASC，Cno DESC);</p>
<h3 id="唯一值索引"><a href="#唯一值索引" class="headerlink" title="唯一值索引"></a>唯一值索引</h3><ul>
<li>对于已含重复值的属性列不能建UNIQUE索引</li>
<li>对某个列建立UNIQUE索引后，插入新记录时DBMS会自动检查新记录在该列上是否取了重复值。这相当于增加了一个UNIQUE约束</li>
</ul>
<h3 id="聚簇索引的特点"><a href="#聚簇索引的特点" class="headerlink" title="聚簇索引的特点"></a>聚簇索引的特点</h3><ul>
<li>在一个基本表上最多只能建立一个聚簇索引</li>
<li>聚簇索引的用途：对于某些类型的查询，可以提高查询效率</li>
<li>聚簇索引的适用范围<ul>
<li>很少对基表进行增、删操作</li>
<li>很少对其中的变长列进行修改操作 </li>
</ul>
</li>
</ul>
<h2 id="DROP-INDEX"><a href="#DROP-INDEX" class="headerlink" title="DROP INDEX"></a>DROP INDEX</h2><h3 id="使用-4"><a href="#使用-4" class="headerlink" title="使用"></a>使用</h3><p> DROP INDEX &lt;索引名&gt;；</p>
<h3 id="Example-4"><a href="#Example-4" class="headerlink" title="Example"></a>Example</h3><p> DROP INDEX Stusname;</p>
<h2 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h2><h3 id="使用-5"><a href="#使用-5" class="headerlink" title="使用"></a>使用</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> SELECT        [ALL|DISTINCT] &lt;目标列表达式&gt;</span><br><span class="line">                                           [，&lt;目标列表达式&gt;] …</span><br><span class="line">FROM          &lt;表名或视图名&gt;</span><br><span class="line">                   [， &lt;表名或视图名&gt; ] …</span><br><span class="line">[ WHERE      &lt;条件表达式&gt; ]</span><br><span class="line">[ GROUP BY  &lt;列名1&gt; [ HAVING &lt;条件表达式&gt; ] ]</span><br><span class="line">[ ORDER BY  &lt;列名2&gt; [ ASC|DESC ] ]；</span><br></pre></td></tr></table></figure>
<h3 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h3><h4 id="查询列"><a href="#查询列" class="headerlink" title="查询列"></a>查询列</h4><h5 id="1-查询指定列"><a href="#1-查询指定列" class="headerlink" title="(1)查询指定列"></a>(1)查询指定列</h5><h5 id="2-查询全部列"><a href="#2-查询全部列" class="headerlink" title="(2)查询全部列"></a>(2)查询全部列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sno，Sname，Ssex，Sage，Sdept </span><br><span class="line">FROM    Student;</span><br><span class="line">   或</span><br><span class="line">SELECT  *</span><br><span class="line">FROM    Student;</span><br></pre></td></tr></table></figure>
<h5 id="3-查询经过计算的值"><a href="#3-查询经过计算的值" class="headerlink" title="(3)查询经过计算的值"></a>(3)查询经过计算的值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT     Sname，‘Year of Birth: ’，2014-Sage，</span><br><span class="line">                ISLOWER(Sdept)</span><br><span class="line">FROM       Student;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>Sname   ‘Year of Birth:’  201３-Sage   ISLOWER(Sdept)</p>
<h4 id="查询元祖"><a href="#查询元祖" class="headerlink" title="查询元祖"></a>查询元祖</h4><h5 id="消除取值重复的行"><a href="#消除取值重复的行" class="headerlink" title="消除取值重复的行"></a>消除取值重复的行</h5><h6 id="使用-6"><a href="#使用-6" class="headerlink" title="使用"></a>使用</h6><p>在SELECT子句中使用DISTINCT短语</p>
<h6 id="Example-5"><a href="#Example-5" class="headerlink" title="Example"></a>Example</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sno</span><br><span class="line">      FROM    SC;</span><br><span class="line">	或(默认 ALL)</span><br><span class="line">      SELECT  ALL Sno</span><br><span class="line">      FROM    SC;</span><br><span class="line"> 结果： Sno   </span><br><span class="line">             ------- </span><br><span class="line">              95001  </span><br><span class="line">              95001  </span><br><span class="line">              95001  </span><br><span class="line">              95002  </span><br><span class="line">              95002 </span><br><span class="line"></span><br><span class="line">SELECT   DISTINCT Sno</span><br><span class="line">       FROM      SC;</span><br><span class="line"> </span><br><span class="line">结果：</span><br><span class="line">       Sno   </span><br><span class="line">         ------- </span><br><span class="line">          95001  </span><br><span class="line">          95002</span><br></pre></td></tr></table></figure>
<h5 id="查询满足条件的元组"><a href="#查询满足条件的元组" class="headerlink" title="查询满足条件的元组"></a>查询满足条件的元组</h5><h6 id="使用-7"><a href="#使用-7" class="headerlink" title="使用"></a>使用</h6><table>
<thead>
<tr>
<th>查询条件</th>
<th>谓词</th>
</tr>
</thead>
<tbody>
<tr>
<td>比较</td>
<td>=，&gt;，&lt;，&gt;=，&lt;=，!= 或 &lt;&gt;，!&gt;，!&lt;，NOT+比较运算符</td>
</tr>
<tr>
<td>确定范围</td>
<td>BETWEEN  AND ，NOT BETWEEN  AND</td>
</tr>
<tr>
<td>确定合集</td>
<td>IN,NOT IN</td>
</tr>
<tr>
<td>字符匹配</td>
<td>LIKE,NOT LIKE</td>
</tr>
<tr>
<td>空值</td>
<td>IS NULL,IS NOT NULL</td>
</tr>
<tr>
<td>多重条件</td>
<td>AND,OR</td>
</tr>
</tbody>
</table>
<h6 id="Example-6"><a href="#Example-6" class="headerlink" title="Example"></a>Example</h6><p>(1)比较<br>查询所有年龄在20岁以下的学生姓名及其年龄。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT     Sname，Sage </span><br><span class="line">FROM        Student    </span><br><span class="line">WHERE      Sage &lt; 20;         或  </span><br><span class="line"></span><br><span class="line">SELECT      Sname，Sage </span><br><span class="line">FROM         Student </span><br><span class="line">WHERE       NOT Sage &gt;= 20;</span><br></pre></td></tr></table></figure>
<p>(2)确定范围<br>查询年龄在（不在）20~23岁（包括20岁和23岁）之间的学生的姓名、系别和年龄。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 	Sname，Sdept，Sage</span><br><span class="line">FROM   	Student</span><br><span class="line">WHERE 	Sage （NOT） BETWEEN 20 AND 23;</span><br></pre></td></tr></table></figure></p>
<p>(3)确定合集<br>查询(不是)信息系（IS）、数学系（MA）和计算机科学系（CS）学生的姓名和性别。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 	Sname，Ssex</span><br><span class="line">FROM  	Student</span><br><span class="line">WHERE	Sdept (NOT)   IN    ( &apos;IS&apos;，&apos;MA&apos;，&apos;CS&apos; );</span><br></pre></td></tr></table></figure></p>
<p>(4)字符串匹配<br>通配符<br>% (百分号)  代表任意长度（长度可以为0）的字符串<br>_ (下横线)  代表任意单个字符</p>
<p>查询所有姓刘学生的姓名、学号和性别。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Sname，Sno，Ssex</span><br><span class="line">FROM     Student</span><br><span class="line">WHERE   Sname   LIKE    ‘刘%’;</span><br></pre></td></tr></table></figure></p>
<p>查询姓”欧阳”且全名为三个汉字的学生的姓名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sname</span><br><span class="line">FROM    Student</span><br><span class="line">WHERE  Sname   LIKE   &apos;欧阳__&apos;;</span><br></pre></td></tr></table></figure></p>
<p>查询名字中第2个字为”阳”字的学生的姓名和学号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sname，Sno</span><br><span class="line">FROM    Student</span><br><span class="line">WHERE  Sname     LIKE     &apos;__阳%&apos;;</span><br></pre></td></tr></table></figure></p>
<p>查询所有不姓刘的学生姓名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Sname</span><br><span class="line">FROM     Student</span><br><span class="line">WHERE   Sname      NOT    LIKE   &apos;刘%&apos;;</span><br></pre></td></tr></table></figure></p>
<p>查询课程名称以DB_Design开头的课程的课程号和学分。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 	Cno，Ccredit</span><br><span class="line">FROM 		Course</span><br><span class="line">WHERE 	Cname   LIKE   &apos;DB\_Design%&apos;   ESCAPE &apos;\&apos;</span><br></pre></td></tr></table></figure></p>
<p>(6)空值<br>某些学生选修课程后没有(有)参加考试，所以有选课记录，但没有考试成绩。查询缺少成绩的学生的学号和相应的课程号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sno，Cno</span><br><span class="line">FROM    SC</span><br><span class="line">WHERE   Grade IS (NOT) NULL;</span><br></pre></td></tr></table></figure></p>
<p>(7)多重条件<br>查询计算机系年龄在20岁以下的学生姓名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Sname</span><br><span class="line">FROM    Student</span><br><span class="line">WHERE  Sdept= &apos;CS&apos;  AND  Sage&lt;20;</span><br></pre></td></tr></table></figure></p>
<p>查询信息系（IS）、数学系（MA）和计算机科学系（CS）学生的姓名和性别。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Sname，Ssex</span><br><span class="line">FROM     Student</span><br><span class="line">WHERE   Sdept IN ( &apos;IS&apos;，&apos;MA&apos;，&apos;CS&apos; )</span><br><span class="line">可改写为：</span><br><span class="line">SELECT  Sname，Ssex</span><br><span class="line">FROM    Student</span><br><span class="line">WHERE  Sdept= &apos; IS &apos; OR Sdept= &apos; MA&apos; OR Sdept= &apos; CS &apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="对查询结果排序"><a href="#对查询结果排序" class="headerlink" title="对查询结果排序"></a>对查询结果排序</h4><h5 id="使用-8"><a href="#使用-8" class="headerlink" title="使用"></a>使用</h5><ul>
<li>升序：ASC；降序：DESC；缺省值为升序</li>
<li>ASC：排序列为空值的元组最后显示</li>
<li>DESC：排序列为空值的元组最先显示 </li>
</ul>
<h5 id="Example-7"><a href="#Example-7" class="headerlink" title="Example"></a>Example</h5><p>查询全体学生情况，查询结果按所在系的系号升序排列，同一系中的学生按年龄降序排列。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT   *</span><br><span class="line">FROM   Student</span><br><span class="line">ORDER BY   Sdept   ASC，Sage DESC；</span><br></pre></td></tr></table></figure></p>
<h4 id="使用集函数"><a href="#使用集函数" class="headerlink" title="使用集函数"></a>使用集函数</h4><h5 id="使用-9"><a href="#使用-9" class="headerlink" title="使用"></a>使用</h5><p>5类主要集函数</p>
<ul>
<li>计数<br>COUNT（[DISTINCT|ALL] *）<br>COUNT（[DISTINCT|ALL] &lt;列名&gt;）</li>
<li>计算总和<br>SUM（[DISTINCT|ALL] &lt;列名&gt;）    </li>
<li>计算平均值<br>AVG（[DISTINCT|ALL] &lt;列名&gt;）</li>
<li>求最大值<br>MAX（[DISTINCT|ALL] &lt;列名&gt;）    </li>
<li>求最小值<br>MIN（[DISTINCT|ALL] &lt;列名&gt;）</li>
</ul>
<h5 id="Example-8"><a href="#Example-8" class="headerlink" title="Example"></a>Example</h5><p>查询学生总人数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT   COUNT(  *  )</span><br><span class="line">FROM     Student;</span><br></pre></td></tr></table></figure></p>
<p>查询至少选修了一门课程的学生人数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT    COUNT(DISTINCT Sno)</span><br><span class="line">FROM      SC;</span><br></pre></td></tr></table></figure></p>
<p>计算1号课程的学生平均成绩。<br>SELECT     AVG(Grade)<br>FROM       SC<br>WHERE     Cno= ‘ 1 ’;   </p>
<p>查询选修1号课程的学生最高分数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT     MAX(Grade)</span><br><span class="line">FROM       SC</span><br><span class="line">WHER       Cno= ‘ 1 ’;</span><br></pre></td></tr></table></figure></p>
<h4 id="对查询结果分组"><a href="#对查询结果分组" class="headerlink" title="对查询结果分组"></a>对查询结果分组</h4><h5 id="使用-10"><a href="#使用-10" class="headerlink" title="使用"></a>使用</h5><ul>
<li>未对查询结果分组，集函数将作用于整个查询结果</li>
<li>对查询结果分组后，集函数将分别作用于每个组 </li>
</ul>
<h5 id="Example-9"><a href="#Example-9" class="headerlink" title="Example"></a>Example</h5><p>求各个课程号及相应的选课人数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Cno，Sno</span><br><span class="line">FROM      SC</span><br><span class="line">GROUP    BY Cno;                            </span><br><span class="line">                                 </span><br><span class="line">结果                                               </span><br><span class="line">        Cno        COUNT(Sno)        </span><br><span class="line">		1             22      </span><br><span class="line">		2             34</span><br><span class="line"> 		3             44</span><br><span class="line">		4             33</span><br><span class="line">   		5             48</span><br></pre></td></tr></table></figure></p>
<h4 id="使用HAVING筛选结果"><a href="#使用HAVING筛选结果" class="headerlink" title="使用HAVING筛选结果"></a>使用HAVING筛选结果</h4><h5 id="使用-11"><a href="#使用-11" class="headerlink" title="使用"></a>使用</h5><ul>
<li>WHERE子句作用于基表或视图，从中选择满足条件的元组。</li>
<li>HAVING短语作用于组（查询中间结果），从中选择满足条件的组。 </li>
<li>HAVING短语与GROUP BY 子句同时使用</li>
</ul>
<h5 id="Example-10"><a href="#Example-10" class="headerlink" title="Example"></a>Example</h5><p>查询有30个以上学生选修课程的课程号和选课人数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Cno，               FROM      SC</span><br><span class="line">GROUP BY Cno</span><br><span class="line">HAVING COUNT(Sno)&gt;30</span><br></pre></td></tr></table></figure></p>
<h4 id="子句执行顺序"><a href="#子句执行顺序" class="headerlink" title="子句执行顺序"></a>子句执行顺序</h4><blockquote>
<p>FROM<br>WHERE<br>GROUP  BY<br>HAVING<br>SELECT<br>ORDER  BY</p>
</blockquote>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>SQL中连接查询的主要类型</p>
<pre><code>- 广义笛卡尔积
- 等值连接(含自然连接)
- 非等值连接查询
- 自身连接查询
- 外连接查询
- 复合条件连接查询
</code></pre><h4 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h4><h5 id="使用-12"><a href="#使用-12" class="headerlink" title="使用"></a>使用</h5><p>连接运算符为 = 的连接操作<br> [&lt;表名1&gt;.]&lt;列名1&gt;  =  [&lt;表名2&gt;.]&lt;列名2&gt;</p>
<ul>
<li>任何子句中引用表1和表2中同名属性时，都必须加表名前缀。</li>
<li>引用唯一属性名时可以加也可以省略表名前缀。 </li>
</ul>
<h5 id="Example-11"><a href="#Example-11" class="headerlink" title="Example"></a>Example</h5><p>查询每个学生及其选修课程的情况。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Student.*，SC.*</span><br><span class="line">FROM     Student，SC</span><br><span class="line">WHERE  Student.Sno = SC.Sno；</span><br></pre></td></tr></table></figure></p>
<h4 id="自然连接"><a href="#自然连接" class="headerlink" title="自然连接"></a>自然连接</h4><h5 id="使用-13"><a href="#使用-13" class="headerlink" title="使用"></a>使用</h5><p>等值连接的一种特殊情况，把目标列中重复的属性列去掉。</p>
<h5 id="Example-12"><a href="#Example-12" class="headerlink" title="Example"></a>Example</h5><p>对[例32]用自然连接完成。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Student.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade</span><br><span class="line">FROM     Student，SC</span><br><span class="line">WHERE  Student.Sno = SC.Sno；</span><br></pre></td></tr></table></figure></p>
<h4 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h4><p>连接运算符 不是 = 的连接操作</p>
<ul>
<li><p>[&lt;表名1&gt;.]&lt;列名1&gt;&lt;比较运算符&gt;[&lt;表名2&gt;.]&lt;列名2&gt;<br>比较运算符：&gt;、&lt;、&gt;=、&lt;=、!=</p>
</li>
<li><p>[&lt;表名1&gt;.]&lt;列名1&gt; BETWEEN [&lt;表名2&gt;.]&lt;列名2&gt; AND [&lt;表名2&gt;.]&lt;列名3&gt; </p>
</li>
</ul>
<h4 id="自身连接"><a href="#自身连接" class="headerlink" title="自身连接"></a>自身连接</h4><h5 id="使用-14"><a href="#使用-14" class="headerlink" title="使用"></a>使用</h5><ul>
<li>一个表与其自己进行连接，称为表的自身连接</li>
<li>需要给表起别名以示区别</li>
<li>由于所有属性名都是同名属性，因此必须使用别名前缀</li>
</ul>
<h5 id="Example-13"><a href="#Example-13" class="headerlink" title="Example"></a>Example</h5><p>查询每一门课的间接先修课（即先修课的先修课）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  FIRST.Cno，SECOND.Cpno</span><br><span class="line">FROM  Course  FIRST，Course  SECOND</span><br><span class="line">WHERE FIRST.Cpno = SECOND.Cno；</span><br></pre></td></tr></table></figure></p>
<p>查询与“刘晨”在同一个系学习的学生(学号、姓名和所在系)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  S1.Sno，S1.Sname，S1.Sdept</span><br><span class="line">FROM     Student S1，Student S2</span><br><span class="line">WHERE  S1.Sdept = S2.Sdept  AND S2.Sname = &apos;刘晨&apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><h5 id="使用-15"><a href="#使用-15" class="headerlink" title="使用"></a>使用</h5><p>外连接操作以指定表为连接主体，将主体表中不满足连接条件的元组一并输出</p>
<ul>
<li>右外连接:外连接符出现在连接条件的右边</li>
<li>左外连接:外连接符出现在连接条件的左边</li>
</ul>
<h5 id="Example-14"><a href="#Example-14" class="headerlink" title="Example"></a>Example</h5><p>查询每个学生及其选修课程的情况包括没有选修课程的学生<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT  Student.Sno，Sname，Ssex，Sage，Sdept，Cno，Grade</span><br><span class="line">FROM    Student，SC</span><br><span class="line">WHERE  Student.Sno = SC.Sno(*);</span><br></pre></td></tr></table></figure></p>
<h4 id="复合连接"><a href="#复合连接" class="headerlink" title="复合连接"></a>复合连接</h4><h5 id="使用-16"><a href="#使用-16" class="headerlink" title="使用"></a>使用</h5><p>WHERE子句中含多个连接条件时，称为复合条件连接</p>
<h5 id="Example-15"><a href="#Example-15" class="headerlink" title="Example"></a>Example</h5><p>查询选修2号课程且成绩在90分以上的所有学生的学号、姓名<br>SELECT Student.Sno, student.Sname<br>FROM    Student, SC<br>WHERE Student.Sno = SC.Sno AND  SC.Cno= ‘ 2 ‘ AND  SC.Grade &gt; 90;</p>
<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><h5 id="Example-16"><a href="#Example-16" class="headerlink" title="Example"></a>Example</h5><p>查询每个学生的学号、姓名、选修的课程名及成绩。<br>SELECT Student.Sno，Sname，Cname，Grade FROM  Student，SC，Course<br>WHERE Student.Sno = SC.Sno and SC.Cno = Course.Cno;</p>
<h3 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h3><ul>
<li>将一个查询块嵌套在另一个查询块的WHERE子句或HAVING短语的条件中的查询称为嵌套查询。</li>
<li>子查询的限制不能使用ORDER BY子句。</li>
</ul>
<h4 id="引出子查询的谓词"><a href="#引出子查询的谓词" class="headerlink" title="引出子查询的谓词"></a>引出子查询的谓词</h4><ul>
<li>带有IN谓词的子查询</li>
<li>带有比较运算符的子查询</li>
<li>带有ANY或ALL谓词的子查询</li>
<li>带有EXISTS谓词的子查询</li>
</ul>
<h4 id="带有IN谓词的子查询"><a href="#带有IN谓词的子查询" class="headerlink" title="带有IN谓词的子查询"></a>带有IN谓词的子查询</h4><p>查询与“刘晨”在同一个系学习的学生(学号、姓名和所在系)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno，Sname，Sdept</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sdept  IN</span><br><span class="line">		(SELECT Sdept FROM Student WHERE Sname= ‘ 刘晨 ’);</span><br></pre></td></tr></table></figure></p>
<h4 id="带有比较运算符的子查询"><a href="#带有比较运算符的子查询" class="headerlink" title="带有比较运算符的子查询"></a>带有比较运算符的子查询</h4><p>假设一个学生只可能在一个系学习(排除值的集合)，并且必须属于一个系(排除空值)，则在[例37]可以用 = 代替IN ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno，Sname，Sdept</span><br><span class="line">     FROM    Student</span><br><span class="line">     WHERE Sdept   =</span><br><span class="line">            SELECT Sdept</span><br><span class="line">            FROM    Student</span><br><span class="line">            WHERE Sname= &apos; 刘晨 &apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="带有ANY或ALL谓词的子查询"><a href="#带有ANY或ALL谓词的子查询" class="headerlink" title="带有ANY或ALL谓词的子查询"></a>带有ANY或ALL谓词的子查询</h4><p>查询其他系中比信息系任意一个(其中某一个)学生年龄小的学生姓名和年龄<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname，Sage</span><br><span class="line">FROM    Student</span><br><span class="line">WHERE Sage &lt; ANY (SELECT  Sage</span><br><span class="line">                              FROM    Student</span><br><span class="line">                              WHERE Sdept= &apos; IS &apos;)</span><br><span class="line">        AND Sdept &lt;&gt; &apos; IS &apos; ;  </span><br><span class="line">                /* 注意这是父查询块中的条件 */</span><br></pre></td></tr></table></figure></p>
<p>查询其他系中比信息系所有学生年龄都小的学生姓名及年龄。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname，Sage</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sage &lt; ALL</span><br><span class="line">            (SELECT Sage</span><br><span class="line">             FROM Student</span><br><span class="line">             WHERE Sdept= &apos; IS &apos;)</span><br><span class="line">       AND Sdept &lt;&gt; &apos; IS ’;</span><br></pre></td></tr></table></figure></p>
<h4 id="带有EXISTS谓词的子查询"><a href="#带有EXISTS谓词的子查询" class="headerlink" title="带有EXISTS谓词的子查询"></a>带有EXISTS谓词的子查询</h4><p>查询(没有)所有选修了1号课程的学生姓名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sname</span><br><span class="line">FROM Student</span><br><span class="line">WHERE (NOT) EXISTS</span><br><span class="line">( SELECT *</span><br><span class="line">  FROM SC           /*相关子查询*/</span><br><span class="line">  WHERE  Sno=Student.Sno 	       </span><br><span class="line">  AND  Cno= ‘1’ );</span><br></pre></td></tr></table></figure></p>
<p>查询与“刘晨”在同一个系学习的学生。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno，Sname，Sdept</span><br><span class="line">FROM Student S1</span><br><span class="line">WHERE EXISTS</span><br><span class="line">　 SELECT *</span><br><span class="line">   FROM Student S2</span><br><span class="line">   WHERE S2.Sdept = S1.Sdept AND</span><br><span class="line">           S2.Sname = &apos; 刘晨 &apos;;</span><br></pre></td></tr></table></figure></p>
<h3 id="集合查询"><a href="#集合查询" class="headerlink" title="集合查询"></a>集合查询</h3><p>一般商用数据库支持的集合操作种类</p>
<ul>
<li>并操作(UNION)</li>
<li>交操作(INTERSECT)</li>
<li>差操作(MINUS)</li>
</ul>
<h4 id="并操作"><a href="#并操作" class="headerlink" title="并操作"></a>并操作</h4><h5 id="使用-17"><a href="#使用-17" class="headerlink" title="使用"></a>使用</h5><p>&lt;查询块&gt;<br>UNION<br>&lt;查询块&gt;</p>
<h5 id="Example-17"><a href="#Example-17" class="headerlink" title="Example"></a>Example</h5><p>查询计算机科学系的学生及年龄不大于19岁的学生。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sdept= &apos;CS&apos;</span><br><span class="line">UNION</span><br><span class="line">SELECT *</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sage&lt;=19;</span><br></pre></td></tr></table></figure></p>
<p>查询选修了课程1或者选修了课程2的学生。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">方法一：</span><br><span class="line">    SELECT Sno</span><br><span class="line">    FROM SC</span><br><span class="line">    WHERE Cno=&apos; 1 &apos;</span><br><span class="line">    UNION</span><br><span class="line">    SELECT Sno</span><br><span class="line">    FROM SC</span><br><span class="line">    WHERE Cno= &apos; 2 &apos;;</span><br><span class="line">方法二：</span><br><span class="line">   	SELECT  DISTINCT  Sno</span><br><span class="line">    FROM SC</span><br><span class="line">    WHERE Cno=&apos; 1 &apos;  OR  Cno= &apos; 2 &apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="交操作"><a href="#交操作" class="headerlink" title="交操作"></a>交操作</h4><h5 id="使用-18"><a href="#使用-18" class="headerlink" title="使用"></a>使用</h5><p>标准SQL中没有提供集合交操作，但可用其他方法间接实现。</p>
<h5 id="Example-18"><a href="#Example-18" class="headerlink" title="Example"></a>Example</h5><p>查询选修课程1的学生集合与选修课程2的学生集合的交集<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT Sno</span><br><span class="line">FROM SC</span><br><span class="line">WHERE Cno=&apos; 1 &apos; AND Sno IN</span><br><span class="line">                (SELECT Sno</span><br><span class="line">           		FROM SC</span><br><span class="line">  				WHERE Cno=&apos; 2 &apos;);</span><br></pre></td></tr></table></figure></p>
<h4 id="差操作"><a href="#差操作" class="headerlink" title="差操作"></a>差操作</h4><h5 id="使用-19"><a href="#使用-19" class="headerlink" title="使用"></a>使用</h5><p>标准SQL中没有提供集合差操作，但可用其他方法间接实现。</p>
<h5 id="Example-19"><a href="#Example-19" class="headerlink" title="Example"></a>Example</h5><p>查询学生姓名与教师姓名的差集<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT Sname</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sname NOT  IN </span><br><span class="line">      	(SELECT Tname</span><br><span class="line">     	 FROM Teacher);</span><br></pre></td></tr></table></figure></p>
<h4 id="对集合操作结果的排序"><a href="#对集合操作结果的排序" class="headerlink" title="对集合操作结果的排序"></a>对集合操作结果的排序</h4><h5 id="使用-20"><a href="#使用-20" class="headerlink" title="使用"></a>使用</h5><ul>
<li>ORDER BY子句只能用于对最终查询结果排序，不能对中间结果排序</li>
<li>任何情况下，ORDER BY子句只能出现在最后</li>
<li>对集合操作结果排序时，ORDER BY子句中用数字指定排序属性</li>
</ul>
<h5 id="Example-20"><a href="#Example-20" class="headerlink" title="Example"></a>Example</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sdept= &apos;CS&apos;</span><br><span class="line">UNION</span><br><span class="line">SELECT *</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sage&lt;=19</span><br><span class="line">ORDER BY Sno;</span><br></pre></td></tr></table></figure>
<h3 id="SELECT的一般格式"><a href="#SELECT的一般格式" class="headerlink" title="SELECT的一般格式"></a>SELECT的一般格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT [ALL|DISTINCT]  </span><br><span class="line">   &lt;目标列表达式&gt; [别名] [ ，&lt;目标列表达式&gt; [别名]] …</span><br><span class="line">FROM     &lt;表名或视图名&gt; [别名] </span><br><span class="line">             [ ，&lt;表名或视图名&gt; [别名]] …</span><br><span class="line"> [WHERE &lt;条件表达式&gt;]</span><br><span class="line"> [GROUP BY &lt;列名1&gt;[，&lt;列名1’&gt;] ...</span><br><span class="line">[HAVING     &lt;条件表达式&gt;]]</span><br><span class="line">[ORDER BY &lt;列名2&gt; [ASC|DESC] </span><br><span class="line">              [，&lt;列名2’&gt; [ASC|DESC] ] …  ];</span><br></pre></td></tr></table></figure>
<h2 id="数据更新"><a href="#数据更新" class="headerlink" title="数据更新"></a>数据更新</h2><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><h4 id="插入数据的方式"><a href="#插入数据的方式" class="headerlink" title="插入数据的方式"></a>插入数据的方式</h4><h5 id="插入单个元组"><a href="#插入单个元组" class="headerlink" title="插入单个元组"></a>插入单个元组</h5><h6 id="使用-21"><a href="#使用-21" class="headerlink" title="使用"></a>使用</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT</span><br><span class="line">INTO &lt;表名&gt; [(&lt;属性列1&gt;[，&lt;属性列2 &gt;…)]</span><br><span class="line">VALUES (&lt;常量1&gt; [，&lt;常量2&gt;]    …           )</span><br></pre></td></tr></table></figure>
<h6 id="Example-21"><a href="#Example-21" class="headerlink" title="Example"></a>Example</h6><p>插入一条选课记录( ‘95020’，’1 ‘)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT</span><br><span class="line">INTO SC(Sno，Cno)</span><br><span class="line">VALUES (&apos; 95020 &apos;，&apos; 1 &apos;);</span><br></pre></td></tr></table></figure></p>
<h5 id="插入子查询结果"><a href="#插入子查询结果" class="headerlink" title="插入子查询结果"></a>插入子查询结果</h5><h6 id="使用-22"><a href="#使用-22" class="headerlink" title="使用"></a>使用</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT </span><br><span class="line">INTO &lt;表名&gt;  [(&lt;属性列1&gt; [，&lt;属性列2&gt;…  )]</span><br><span class="line">子查询;</span><br></pre></td></tr></table></figure>
<h6 id="Example-22"><a href="#Example-22" class="headerlink" title="Example"></a>Example</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSERT</span><br><span class="line">INTO  Deptage(Sdept，Avgage)</span><br><span class="line">SELECT  Sdept，AVG(Sage)</span><br><span class="line">FROM  Student</span><br><span class="line">GROUP BY Sdept;</span><br></pre></td></tr></table></figure>
<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><h4 id="使用-23"><a href="#使用-23" class="headerlink" title="使用"></a>使用</h4><p>UPDATE  &lt;表名&gt;<br>SET  &lt;列名&gt;=&lt;表达式&gt;[，&lt;列名&gt;=&lt;表达式&gt;]…<br>[WHERE &lt;条件&gt;];</p>
<p>三种修改方式:</p>
<ul>
<li>修改某一个元组的值</li>
<li>修改多个元组的值</li>
<li>带子查询的修改语句</li>
</ul>
<h4 id="Example-23"><a href="#Example-23" class="headerlink" title="Example"></a>Example</h4><p>1.修改某一个元组的值<br>将学生95001的年龄改为22岁。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE  Student</span><br><span class="line">SET Sage=22</span><br><span class="line">WHERE  Sno=&apos; 95001 &apos;;</span><br></pre></td></tr></table></figure></p>
<p>2.修改多个元组的值<br>将所有学生的年龄增加1岁。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE Student</span><br><span class="line">SET Sage= Sage+1;</span><br></pre></td></tr></table></figure></p>
<p>3.带子查询的修改语句<br>将信息系所有学生的年龄增加1岁。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE Student</span><br><span class="line">SET Sage= Sage+1</span><br><span class="line">WHERE Sdept=&apos; IS &apos;;</span><br></pre></td></tr></table></figure></p>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><h4 id="使用-24"><a href="#使用-24" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM     &lt;表名&gt;</span><br><span class="line">[WHERE &lt;条件&gt;];</span><br></pre></td></tr></table></figure>
<p>三种删除方式:</p>
<ul>
<li>删除某一个元组的值</li>
<li>删除多个元组的值</li>
<li>带子查询的删除语句</li>
</ul>
<h4 id="Example-24"><a href="#Example-24" class="headerlink" title="Example"></a>Example</h4><ol>
<li>删除某一个元组的值<br>删除学号为95019的学生记录。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sno=&apos;95019&apos;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.删除多个元组的值<br>删除2号课程的所有选课记录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM SC；</span><br><span class="line">WHERE Cno=&apos;2&apos;;</span><br></pre></td></tr></table></figure></p>
<p>3.带子查询的删除语句<br>删除计算机科学系所有学生的选课记录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM SC</span><br><span class="line">WHERE  &apos;CS&apos;=</span><br><span class="line">    (SELETE Sdept</span><br><span class="line">     FROM Student</span><br><span class="line">     WHERE Student.Sno=SC.Sno);</span><br></pre></td></tr></table></figure></p>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><h3 id="定义视图"><a href="#定义视图" class="headerlink" title="定义视图"></a>定义视图</h3><h4 id="使用-25"><a href="#使用-25" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE  VIEW </span><br><span class="line">     &lt;视图名&gt;  [(&lt;列名&gt;  [，&lt;列名&gt;]…)]</span><br><span class="line">AS  &lt;子查询&gt;</span><br><span class="line">[WITH  CHECK  OPTION];</span><br></pre></td></tr></table></figure>
<p>WITH CHECK OPTION<br>透过视图进行增删改操作时，不得破坏视<br>图定义中的谓词条件<br>（即子查询中的条件表达式）</p>
<h4 id="Example-25"><a href="#Example-25" class="headerlink" title="Example"></a>Example</h4><p>建立信息系学生的视图。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW IS_Student</span><br><span class="line">       AS </span><br><span class="line">       SELECT Sno，Sname，Sage</span><br><span class="line">       FROM    Student</span><br><span class="line">       WHERE  Sdept= &apos;IS&apos;;</span><br></pre></td></tr></table></figure></p>
<p>建立信息系学生的视图，并要求透过该视图进行的更新操作只涉及信息系学生。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW IS_Student</span><br><span class="line">       AS </span><br><span class="line">       SELECT Sno，Sname，Sage</span><br><span class="line">       FROM  Student</span><br><span class="line">       WHERE  Sdept= &apos;IS&apos;</span><br><span class="line">       WITH CHECK OPTION;</span><br></pre></td></tr></table></figure></p>
<h4 id="基于多个基表的视图"><a href="#基于多个基表的视图" class="headerlink" title="基于多个基表的视图"></a>基于多个基表的视图</h4><p>建立信息系选修了1号课程的学生视图。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW IS_S1(Sno，Sname，Grade)</span><br><span class="line">       AS </span><br><span class="line">       SELECT Student.Sno，Sname，Grade</span><br><span class="line">       FROM  Student，SC</span><br><span class="line">       WHERE  Sdept= &apos;IS&apos; AND</span><br><span class="line">              Student.Sno=SC.Sno AND</span><br><span class="line">              SC.Cno= &apos;1&apos;;</span><br></pre></td></tr></table></figure></p>
<h4 id="基于视图的视图"><a href="#基于视图的视图" class="headerlink" title="基于视图的视图"></a>基于视图的视图</h4><p>建立信息系选修了1号课程且成绩在90分以上的学生的视图。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW IS_S2</span><br><span class="line">       AS</span><br><span class="line">       SELECT Sno，Sname，Grade</span><br><span class="line">       FROM  IS_S1</span><br><span class="line">       WHERE  Grade&gt;=90;</span><br></pre></td></tr></table></figure></p>
<h4 id="带表达式的视图"><a href="#带表达式的视图" class="headerlink" title="带表达式的视图"></a>带表达式的视图</h4><p>定义一个反映学生出生年份的视图。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE  VIEW BT_S(Sno，Sname，Sbirth)</span><br><span class="line">       AS </span><br><span class="line">   SELECT Sno，Sname，2011-Sage</span><br><span class="line">   FROM  Student</span><br></pre></td></tr></table></figure></p>
<h4 id="建立分组视图"><a href="#建立分组视图" class="headerlink" title="建立分组视图"></a>建立分组视图</h4><p>将学生的学号及他的平均成绩定义为一个视图<br>假设SC表中“成绩”列Grade为数字型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREAT  VIEW S_G(Sno，Gavg)</span><br><span class="line">AS  </span><br><span class="line">  SELECT Sno，AVG(Grade)</span><br><span class="line">   FROM  SC</span><br><span class="line">   GROUP BY Sno;</span><br></pre></td></tr></table></figure></p>
<h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><p>删除视图IS_S1<br>DROP VIEW IS_S1;</p>
<h3 id="查询视图"><a href="#查询视图" class="headerlink" title="查询视图"></a>查询视图</h3><p>在信息系学生的视图中找出年龄小于20岁的学生。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT   Sno，Sage</span><br><span class="line">FROM      IS_Student</span><br><span class="line">WHERE   Sage&lt;20;</span><br></pre></td></tr></table></figure></p>
<p>IS_Student视图的定义 (视图定义例1)：<br>CREATE VIEW IS_Student<br>       AS<br>       SELECT Sno，Sname，Sage<br>       FROM  Student<br>       WHERE  Sdept= ‘IS‘;</p>
<h3 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h3><p>DBMS实现视图更新的方法</p>
<ul>
<li>视图实体化法（View Materialization）</li>
<li>视图消解法（View Resolution）</li>
</ul>
<p>DB2对视图更新的限制：</p>
<ul>
<li>(1) 若视图是由两个以上基本表导出的，则此视图不允许更新。</li>
<li>(2) 若视图的字段来自字段表达式或常数，则不允许对此视图执行INSERT和UPDATE操作，但允许执行DELETE操作。</li>
<li>(3) 若视图的字段来自集函数，则此视图不允许更新。</li>
<li>(4) 若视图定义中含有GROUP BY子句，则此视图不允许更新。</li>
<li>(5) 若视图定义中含有DISTINCT短语，则此视图不允许更新。</li>
<li>(6) 若视图定义中有嵌套查询，并且内层查询的FROM子句中涉及的表也是导出该视图的基本表，则此视图不允许更新。</li>
<li>(7) 一个不允许更新的视图上定义的视图也不允许更新</li>
</ul>
<p>将信息系学生视图IS_Student中学号95002的学生姓名改为“刘辰”。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPDATE  Student</span><br><span class="line">SET Sname= &apos;刘辰&apos;</span><br><span class="line">WHERE Sno= &apos;95002&apos; AND Sdept= &apos;IS&apos;;</span><br></pre></td></tr></table></figure></p>
<p>向信息系学生视图IS_S中插入一个新的学生记录：95029，赵新，20岁<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT</span><br><span class="line">INTO   Student(Sno，Sname，Sage，Sdept)</span><br><span class="line">VALUES(&apos;95029&apos;，&apos;赵新&apos;，20，&apos;IS&apos; );</span><br></pre></td></tr></table></figure></p>
<p>删除视图CS_S中学号为95029的记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM Student</span><br><span class="line">WHERE Sno= &apos;95029&apos; AND Sdept= &apos;IS&apos;;</span><br></pre></td></tr></table></figure></p>
<h3 id="视图的作用"><a href="#视图的作用" class="headerlink" title="视图的作用"></a>视图的作用</h3><ul>
<li>1.视图能够简化用户的操作</li>
<li>2.视图使用户能以多种角度看待同一数据</li>
<li>3.视图对重构数据库提供了一定程度的逻辑独立性</li>
<li>4.视图能够对机密数据提供安全保护</li>
</ul>
<p>建立1号课程的选课视图，并要求透过该视图进行的更新操作只涉及1号课程，同时对该视图的任何操作只能在工作时间进行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW IS_SC</span><br><span class="line">           AS </span><br><span class="line">SELECT Sno，Cno，Grade</span><br><span class="line">FROM  SC</span><br><span class="line">WHERE  Cno= &apos;1&apos;  </span><br><span class="line">AND  TO_CHAR(SYSDATE,&apos;HH24&apos;)  BETWEEN  9  AND  17 </span><br><span class="line">AND  TO_CHAR(SYSDATE,&apos;D&apos;)  BETWEEN  2  AND  6 </span><br><span class="line">WITH CHECK OPTION;</span><br></pre></td></tr></table></figure></p>
<h2 id="数据控制"><a href="#数据控制" class="headerlink" title="数据控制"></a>数据控制</h2><p>数据控制亦称为数据保护，包括数据的：</p>
<ul>
<li>安全性控制（护数据库，防止不合法的使用所造成的数据泄露和破坏。）</li>
<li>完整性控制（数据库中数据的正确性与相容性。）</li>
<li>并发控制（提供事务、事务开始、事务结束、提交）</li>
<li>恢复（事务回滚、重做）</li>
</ul>
<h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><h4 id="使用-26"><a href="#使用-26" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GRANT &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">  [ON &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line">   TO &lt;用户&gt;[,&lt;用户&gt;]...</span><br><span class="line">  [WITH GRANT OPTION];</span><br></pre></td></tr></table></figure>
<p>1.指定了WITH GRANT OPTION子句:<br>  获得某种权限的用户还可以把这种权限再授予别的用户。</p>
<p>2.没有指定WITH GRANT OPTION子句:<br>  获得某种权限的用户只能使用该权限，不能传播该权限</p>
<h4 id="Example-26"><a href="#Example-26" class="headerlink" title="Example"></a>Example</h4><p>把查询Student表权限授给用户U1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT   SELECT </span><br><span class="line">ON   TABLE   Student </span><br><span class="line">TO   U1;</span><br></pre></td></tr></table></figure></p>
<p>把对Student表和Course表的全部权限授予用户U2和U3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILIGES </span><br><span class="line">ON TABLE Student, Course </span><br><span class="line">TO U2, U3;</span><br></pre></td></tr></table></figure></p>
<p>把对表SC的查询权限授予所有用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT SELECT </span><br><span class="line">ON TABLE SC </span><br><span class="line"> TO PUBLIC;</span><br></pre></td></tr></table></figure></p>
<p>把查询Student表和修改学生学号的权限授给用户U4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT UPDATE(Sno), SELECT </span><br><span class="line">ON TABLE Student </span><br><span class="line">TO U4;</span><br></pre></td></tr></table></figure></p>
<p>DBA把在数据库S_C中建立表的权限授予用户U8<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GRANT CREATETAB</span><br><span class="line">ON DATABASE S_C </span><br><span class="line">TO U8;</span><br></pre></td></tr></table></figure></p>
<h3 id="收回权限"><a href="#收回权限" class="headerlink" title="收回权限"></a>收回权限</h3><h4 id="使用-27"><a href="#使用-27" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REVOKE &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">[ON &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line">FROM &lt;用户&gt;[,&lt;用户&gt;]...;</span><br></pre></td></tr></table></figure>
<h4 id="Example-27"><a href="#Example-27" class="headerlink" title="Example"></a>Example</h4><p>把用户U4修改学生学号的权限收回<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REVOKE UPDATE(Sno)</span><br><span class="line">ON TABLE Student </span><br><span class="line">FROM U4;</span><br></pre></td></tr></table></figure></p>
<p>收回所有用户对表SC的查询权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REVOKE SELECT </span><br><span class="line">ON TABLE SC </span><br><span class="line">FROM PUBLIC;</span><br></pre></td></tr></table></figure></p>
<p>把用户U5对SC表的INSERT权限收回<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REVOKE INSERT </span><br><span class="line">ON TABLE SC </span><br><span class="line">FROM U5;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div>
      
        
      
    </div>

    <div>
      
        
<div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton", disable="enable", onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}", style="cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none">
    <span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'" onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'" style="display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)">赏</span>
  </button>
  <div id="QR" style="display: none;">
    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="http://7xt1hs.com1.z0.glb.clouddn.com/wechat-reward-image.jpg" alt="紫音染月 WeChat Pay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>微信打赏</p>
      </div>
    
    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="http://7xt1hs.com1.z0.glb.clouddn.com/alipay-reward-image.jpg" alt="紫音染月 Alipay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>支付宝打赏</p>
      </div>
    
  </div>
</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/database/" rel="tag">#database</a>
          
            <a href="/tags/sql/" rel="tag">#sql</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/24/https/" rel="next" title="HTTPS,SPDY,HTTP/2.0">
                <i class="fa fa-chevron-left"></i> HTTPS,SPDY,HTTP/2.0
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/26/DataBase4/" rel="prev" title="DataBase(4)之数据库的安全性">
                DataBase(4)之数据库的安全性 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/09/24/DataBase3/"
           data-title="DataBase(3)之SQL语句" data-url="https://Hxiaomin.github.io/2016/09/24/DataBase3/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7xt1hs.com1.z0.glb.clouddn.com/avatar.jpg"
               alt="紫音染月" />
          <p class="site-author-name" itemprop="name">紫音染月</p>
          <p class="site-description motion-element" itemprop="description">生如夏花之绚烂，死如秋叶之静美</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">67</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Hxiaomin" target="_blank" title="Github">
                  
                    <i class="fa fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2378980251" target="_blank" title="Weibo">
                  
                    <i class="fa fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:1245537792@qq.com" target="_blank" title="Email">
                  
                    <i class="fa fa-globe"></i>
                  
                  Email
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL语言的动词"><span class="nav-number">1.</span> <span class="nav-text">SQL语言的动词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL的数据定义语句"><span class="nav-number">2.</span> <span class="nav-text">SQL的数据定义语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CREATE-TABLE"><span class="nav-number">3.</span> <span class="nav-text">CREATE TABLE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-number">3.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example"><span class="nav-number">3.2.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#完整性约束"><span class="nav-number">3.3.</span> <span class="nav-text">完整性约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DROP-TABLE"><span class="nav-number">4.</span> <span class="nav-text">DROP TABLE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-1"><span class="nav-number">4.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-1"><span class="nav-number">4.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ALTER-TABLE"><span class="nav-number">5.</span> <span class="nav-text">ALTER TABLE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-2"><span class="nav-number">5.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-2"><span class="nav-number">5.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CREATE-INDEX"><span class="nav-number">6.</span> <span class="nav-text">CREATE INDEX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-3"><span class="nav-number">6.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-3"><span class="nav-number">6.2.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#唯一值索引"><span class="nav-number">6.3.</span> <span class="nav-text">唯一值索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聚簇索引的特点"><span class="nav-number">6.4.</span> <span class="nav-text">聚簇索引的特点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DROP-INDEX"><span class="nav-number">7.</span> <span class="nav-text">DROP INDEX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-4"><span class="nav-number">7.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-4"><span class="nav-number">7.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SELECT"><span class="nav-number">8.</span> <span class="nav-text">SELECT</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-5"><span class="nav-number">8.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单表查询"><span class="nav-number">8.2.</span> <span class="nav-text">单表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#查询列"><span class="nav-number">8.2.1.</span> <span class="nav-text">查询列</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-查询指定列"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">(1)查询指定列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-查询全部列"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">(2)查询全部列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-查询经过计算的值"><span class="nav-number">8.2.1.3.</span> <span class="nav-text">(3)查询经过计算的值</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询元祖"><span class="nav-number">8.2.2.</span> <span class="nav-text">查询元祖</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#消除取值重复的行"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">消除取值重复的行</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#使用-6"><span class="nav-number">8.2.2.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Example-5"><span class="nav-number">8.2.2.1.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查询满足条件的元组"><span class="nav-number">8.2.2.2.</span> <span class="nav-text">查询满足条件的元组</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#使用-7"><span class="nav-number">8.2.2.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Example-6"><span class="nav-number">8.2.2.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对查询结果排序"><span class="nav-number">8.2.3.</span> <span class="nav-text">对查询结果排序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-8"><span class="nav-number">8.2.3.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-7"><span class="nav-number">8.2.3.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用集函数"><span class="nav-number">8.2.4.</span> <span class="nav-text">使用集函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-9"><span class="nav-number">8.2.4.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-8"><span class="nav-number">8.2.4.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对查询结果分组"><span class="nav-number">8.2.5.</span> <span class="nav-text">对查询结果分组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-10"><span class="nav-number">8.2.5.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-9"><span class="nav-number">8.2.5.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用HAVING筛选结果"><span class="nav-number">8.2.6.</span> <span class="nav-text">使用HAVING筛选结果</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-11"><span class="nav-number">8.2.6.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-10"><span class="nav-number">8.2.6.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子句执行顺序"><span class="nav-number">8.2.7.</span> <span class="nav-text">子句执行顺序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连接查询"><span class="nav-number">8.3.</span> <span class="nav-text">连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#等值连接"><span class="nav-number">8.3.1.</span> <span class="nav-text">等值连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-12"><span class="nav-number">8.3.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-11"><span class="nav-number">8.3.1.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自然连接"><span class="nav-number">8.3.2.</span> <span class="nav-text">自然连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-13"><span class="nav-number">8.3.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-12"><span class="nav-number">8.3.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#非等值连接"><span class="nav-number">8.3.3.</span> <span class="nav-text">非等值连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自身连接"><span class="nav-number">8.3.4.</span> <span class="nav-text">自身连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-14"><span class="nav-number">8.3.4.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-13"><span class="nav-number">8.3.4.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外连接"><span class="nav-number">8.3.5.</span> <span class="nav-text">外连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-15"><span class="nav-number">8.3.5.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-14"><span class="nav-number">8.3.5.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复合连接"><span class="nav-number">8.3.6.</span> <span class="nav-text">复合连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-16"><span class="nav-number">8.3.6.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-15"><span class="nav-number">8.3.6.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多表查询"><span class="nav-number">8.3.7.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-16"><span class="nav-number">8.3.7.1.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套查询"><span class="nav-number">8.4.</span> <span class="nav-text">嵌套查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#引出子查询的谓词"><span class="nav-number">8.4.1.</span> <span class="nav-text">引出子查询的谓词</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带有IN谓词的子查询"><span class="nav-number">8.4.2.</span> <span class="nav-text">带有IN谓词的子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带有比较运算符的子查询"><span class="nav-number">8.4.3.</span> <span class="nav-text">带有比较运算符的子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带有ANY或ALL谓词的子查询"><span class="nav-number">8.4.4.</span> <span class="nav-text">带有ANY或ALL谓词的子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带有EXISTS谓词的子查询"><span class="nav-number">8.4.5.</span> <span class="nav-text">带有EXISTS谓词的子查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合查询"><span class="nav-number">8.5.</span> <span class="nav-text">集合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#并操作"><span class="nav-number">8.5.1.</span> <span class="nav-text">并操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-17"><span class="nav-number">8.5.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-17"><span class="nav-number">8.5.1.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#交操作"><span class="nav-number">8.5.2.</span> <span class="nav-text">交操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-18"><span class="nav-number">8.5.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-18"><span class="nav-number">8.5.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#差操作"><span class="nav-number">8.5.3.</span> <span class="nav-text">差操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-19"><span class="nav-number">8.5.3.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-19"><span class="nav-number">8.5.3.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对集合操作结果的排序"><span class="nav-number">8.5.4.</span> <span class="nav-text">对集合操作结果的排序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用-20"><span class="nav-number">8.5.4.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Example-20"><span class="nav-number">8.5.4.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELECT的一般格式"><span class="nav-number">8.6.</span> <span class="nav-text">SELECT的一般格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据更新"><span class="nav-number">9.</span> <span class="nav-text">数据更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#插入数据"><span class="nav-number">9.1.</span> <span class="nav-text">插入数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入数据的方式"><span class="nav-number">9.1.1.</span> <span class="nav-text">插入数据的方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#插入单个元组"><span class="nav-number">9.1.1.1.</span> <span class="nav-text">插入单个元组</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#使用-21"><span class="nav-number">9.1.1.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Example-21"><span class="nav-number">9.1.1.1.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#插入子查询结果"><span class="nav-number">9.1.1.2.</span> <span class="nav-text">插入子查询结果</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#使用-22"><span class="nav-number">9.1.1.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Example-22"><span class="nav-number">9.1.1.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改数据"><span class="nav-number">9.2.</span> <span class="nav-text">修改数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-23"><span class="nav-number">9.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-23"><span class="nav-number">9.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除数据"><span class="nav-number">9.3.</span> <span class="nav-text">删除数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-24"><span class="nav-number">9.3.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-24"><span class="nav-number">9.3.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#视图"><span class="nav-number">10.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义视图"><span class="nav-number">10.1.</span> <span class="nav-text">定义视图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-25"><span class="nav-number">10.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-25"><span class="nav-number">10.1.2.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于多个基表的视图"><span class="nav-number">10.1.3.</span> <span class="nav-text">基于多个基表的视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于视图的视图"><span class="nav-number">10.1.4.</span> <span class="nav-text">基于视图的视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带表达式的视图"><span class="nav-number">10.1.5.</span> <span class="nav-text">带表达式的视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建立分组视图"><span class="nav-number">10.1.6.</span> <span class="nav-text">建立分组视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除视图"><span class="nav-number">10.1.7.</span> <span class="nav-text">删除视图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询视图"><span class="nav-number">10.2.</span> <span class="nav-text">查询视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新视图"><span class="nav-number">10.3.</span> <span class="nav-text">更新视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图的作用"><span class="nav-number">10.4.</span> <span class="nav-text">视图的作用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据控制"><span class="nav-number">11.</span> <span class="nav-text">数据控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#授权"><span class="nav-number">11.1.</span> <span class="nav-text">授权</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-26"><span class="nav-number">11.1.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-26"><span class="nav-number">11.1.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#收回权限"><span class="nav-number">11.2.</span> <span class="nav-text">收回权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-27"><span class="nav-number">11.2.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-27"><span class="nav-number">11.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016/04/15 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">紫音染月</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"Hxiaomin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("cE5WUWWJTxrokSQ5c4RCmCnA-gzGzoHsz", "t9G8EDbi6WNXIPqX05MWb4nt");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
